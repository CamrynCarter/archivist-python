

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Assets Create If not exists Story Runner YAML &mdash; Jitsuin Archivist 0.11.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Assets List Story Runner YAML" href="assets_list.html" />
    <link rel="prev" title="Assets Create Story Runner YAML" href="assets_create.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Jitsuin Archivist
          

          
            
            <img src="../_static/RKVST_Logo_RGB.jpg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.11.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Story Runner</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="generic.html">Generic Story Runner YAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="assets_count.html">Assets Count Story Runner YAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="assets_create.html">Assets Create Story Runner YAML</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Assets Create If not exists Story Runner YAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="assets_list.html">Assets List Story Runner YAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="compliance_compliant_at.html">Compliance Compliant_at Story Runner YAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="compliance_policies_create.html">Compliance Policy Create Story Runner YAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="composite_estate_info.html">Estate Info Story Runner YAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="events_count.html">Events Count Story Runner YAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="events_create.html">Events Create Story Runner YAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="events_list.html">Events List Story Runner YAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="locations_count.html">Locations Count Story Runner YAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="compliance_policies_demo.html">Compliance Policies Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="compliance_policies_demo_dynamic_tolerance.html">Compliance Policies Dynamic Tolerance Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="compliance_policies_demo_richness.html">Compliance Policies Richness Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="door_entry_demo.html">Door Entry Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="estate_info_demo.html">Estate Info Demo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fixtures.html">Fixtures (Common Attributes)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../runner.html">Runner Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../archivist.html">Archivist Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../assets.html">Assets Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../events.html">Events Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../locations.html">Locations Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../attachments.html">Attachments Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compliance_policies/index.html">Compliance Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sboms/index.html">Software Bill of Materials (SBOM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iam/index.html">Identity and Access Management (IAM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timestamp.html">Timestamp Definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../errors.html">Errors Parsing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof_mechanism.html">Proof Mechanism Enumeration</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Jitsuin Archivist</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../getting_started.html">Getting started</a> &raquo;</li>
        
          <li><a href="index.html">Story Runner</a> &raquo;</li>
        
      <li>Assets Create If not exists Story Runner YAML</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="assets-create-if-not-exists-story-runner-yaml">
<span id="assets-create-if-not-exists-yamlref"></span><h1>Assets Create If not exists Story Runner YAML<a class="headerlink" href="#assets-create-if-not-exists-story-runner-yaml" title="Permalink to this headline">¶</a></h1>
<p>Searches for an asset matching the given selector. Returns that asset if found,
else create a new one with the given attributes</p>
<p>‘asset_label’ is not required but if unspecified the created asset will
not be accessible to later actions in the story.</p>
<p>The ‘selector’ setting for both the asset and its associated location are required.</p>
<p>The ‘location’, ‘attachments’ and ‘confirm’ entries are optional.</p>
<p>The ‘arc_namespace’ (for the asset) and the ‘namespace’ (for the location) are used
to distinguish between assets and locations created between runs of the story.
Usually these field values are derived from an environment variable
‘ARCHIVIST_NAMESPACE’ (default value is ‘namespace’).</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nt">steps</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">step</span><span class="p">:</span>
      <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ASSETS_CREATE_IF_NOT_EXISTS</span>
      <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Create a door in Paris at Jitsuin offices.</span>
      <span class="nt">asset_label</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Jitsuin Paris Front Door</span>
    <span class="nt">selector</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">attributes</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">arc_display_name</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">arc_namespace</span>
    <span class="nt">behaviours</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">RecordEvidence</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Attachments</span>
    <span class="nt">attributes</span><span class="p">:</span>
      <span class="nt">arc_display_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Jitsuin Paris Front Door</span>
      <span class="nt">arc_namespace</span><span class="p">:</span> <span class="kt">!ENV</span> <span class="l l-Scalar l-Scalar-Plain">${ARCHIVIST_NAMESPACE:namespace}</span>
      <span class="nt">arc_display_type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">door</span>
      <span class="nt">arc_firmware_version</span><span class="p">:</span> <span class="s">&quot;1.0&quot;</span>
      <span class="nt">arc_serial_number</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">das-j1-01</span>
      <span class="nt">arc_description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Electronic door entry system to Jitsuin France</span>
      <span class="nt">wavestone_asset_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">paris.france.jitsuin.das</span>
    <span class="nt">location</span><span class="p">:</span>
      <span class="nt">selector</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">display_name</span>
        <span class="p p-Indicator">-</span> <span class="nt">attributes</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">namespace</span>
      <span class="nt">display_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Jitsuin Paris</span>
      <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Sales and sales support for the French region</span>
      <span class="nt">latitude</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">48.8339211</span>
      <span class="nt">longitude</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2.371345</span>
      <span class="nt">attributes</span><span class="p">:</span>
        <span class="nt">namespace</span><span class="p">:</span> <span class="kt">!ENV</span> <span class="l l-Scalar l-Scalar-Plain">${ARCHIVIST_NAMESPACE:namespace}</span>
        <span class="nt">address</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5 Parvis Alan Turing, 75013 Paris, France</span>
        <span class="nt">wavestone_ext</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">managed</span>
    <span class="nt">attachments</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">filename</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">functests/test_resources/doors/assets/entry_terminal.jpg</span>
        <span class="nt">content_type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">image/jpg</span>
    <span class="nt">confirm</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="assets_list.html" class="btn btn-neutral float-right" title="Assets List Story Runner YAML" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="assets_create.html" class="btn btn-neutral float-left" title="Assets Create Story Runner YAML" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, support@jitsuin.com.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>